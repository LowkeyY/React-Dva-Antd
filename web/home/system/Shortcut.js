Ext.ux.Shortcuts=function(H){var C=74;var G=64;var B=15;var A=null;var I=null;var E=[];D();function D(){A={index:1,x:B};I={index:1,y:B};}function F(J){if(J>(H.getViewHeight())){return true;}return false;}this.addShortcut=function(J){var L=H.el.createChild({tag:"div",cls:"ux-shortcut-item"}),K=new Ext.ux.ShortcutButton(Ext.apply(J,{text:Ext.util.Format.ellipsis(J.text,16)}),L);E.push(K);this.setXY(K.container);return K;};this.removeShortcut=function(K){var N=document.getElementById(K.container.id);K.destroy();N.parentNode.removeChild(N);var M=[];for(var L=0,J=E.length;L<J;L++){if(E[L]!=K){M.push(E[L]);}}E=M;this.handleUpdate();};this.handleUpdate=function(){D();for(var K=0,J=E.length;K<J;K++){this.setXY(E[K].container);}};this.setXY=function(K){var J=I.y+C,L=F(I.y+C);if(L&&J>(C+B)){A={index:A.index++,x:A.x+G+B};I={index:1,y:B};}K.setXY([A.x,I.y]);I.index++;I.y=I.y+C+B;};Ext.EventManager.onWindowResize(this.handleUpdate,this,{delay:500});};Ext.ux.ShortcutButton=function(A,B){Ext.ux.ShortcutButton.superclass.constructor.call(this,Ext.apply(A,{renderTo:B,template:new Ext.Template('<div class="ux-shortcut-btn {2}"><div>','<div class="haiwaizhishi-info-number x-hide-display" title="您有新的待处理资料" style="line-height:18px;font-size:14px;right:0px;"></div>','<img src="'+Ext.BLANK_IMAGE_URL+'" />','<div class="ux-shortcut-btn-text">{0}</div>',"</div></div>")}));};Ext.extend(Ext.ux.ShortcutButton,Ext.Button,{buttonSelector:"div:first",initButtonEl:function(A,C){Ext.ux.ShortcutButton.superclass.initButtonEl.apply(this,arguments);A.removeClass("x-btn");if(this.iconCls){if(!this.cls){A.removeClass(this.text?"x-btn-text-icon":"x-btn-icon");}}if(this.faceAppUrl){if(this.faceAppIsUpdate===true){var B=function(){this.loadFaceApp();};this.interval=setInterval(B.createDelegate(this),this.faceAppUpdateTimer);}this.loadFaceApp();}},autoWidth:function(){},checkNumberInfo:function(A){if(!A||(Ext.isNumber(A)&&A<0)){return 0;}return Ext.isNumber(A)?A>9?"9+":A:"N";},setInfonumVisible:function(A){var B,C=this.checkNumberInfo(A);if(this.el&&(B=this.el.child("div.haiwaizhishi-info-number"))){if(C){B.update(C);B.removeClass("x-hide-display");}else{B.update(0);B.addClass("x-hide-display");}}},loadFaceApp:function(){if(!this.faceAppUrl||!this.windowId){return ;}Ext.Ajax.request({url:"/dev/potal/messageAction.jcp",method:"post",scope:this,params:{menuId:this.windowId.substring(7)},success:function(C,D){var B=Ext.decode(C.responseText),A;if(B.success&&(A=B.datas)){Ext.each(A,function(F){var E=F.applyTo;if(E){if(E=="desktop"&&Ext.isDefined(F.newMessageCounts)){this.setInfonumVisible(F.newMessageCounts);}else{if(E.match(/info|infos/)&&F.message){Ext.msg(E,F.message);}}}},this);}else{if(!B.success&&B.message){Ext.msg("warn",B.message);}}}});},setText:function(A){this.text=A;if(this.el){this.el.child("div.ux-shortcut-btn-text").update(A);}},setIconClass:function(A){this.iconCls=A;if(this.el){this.btnEl.dom.className="";this.btnEl.addClass(A||"");this.setButtonClass();}return this;}});
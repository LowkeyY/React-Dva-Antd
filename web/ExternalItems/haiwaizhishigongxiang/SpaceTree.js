Ext.ns("ExternalItems.haiwaizhishigongxiang");ExternalItems.haiwaizhishigongxiang.SpaceTree=function(){};ExternalItems.haiwaizhishigongxiang.SpaceTree.prototype={applyState:function(B,C,A){this[B](A,C);},cs0:function(A,E){var D=this.tree.getSelectionModel().getSelectedNode();var F=E.dataId;if(D==this.tree.root){D.reload(function(){D=D.findChild("id",F);if(D){D.fireEvent("click",D);}},this);}else{if(E.fromId=="835d0b03-18fb-4cf0-a6c9-2ceedebc9daa"){var C=(E.pTab=="4e00f4d6-0a20-4541-8f74-d0debf99f57a");var B;if(B=D.findChild("text",C?"子站点":"栏目")){B.reload(function(){D=B.findChild("id",F);if(D){D.fireEvent("click",D);}},this);}else{D.reload(function(){D=D.findChild("text",C?"子站点":"栏目");D.reload(function(){D=D.findChild("id",F);if(D){D.fireEvent("click",D);}},this);},this);}}else{D.reload(function(){D=D.findChild("id",F);if(D){D.fireEvent("click",D);}},this);}}},cs1:function(A,D){var C=this.tree.getSelectionModel().getSelectedNode();if(C&&C.parentNode){var B=C.parentNode;if(B.attributes.type=="mulu"&&B.childNodes.length==1){B=B.parentNode;}delete B.attributes.children;B.reload(function(){B.fireEvent("click",B);},this);}},cs2:function(A,B){this.refreshParentAnd(function(C,D){D=C.findChild("id",D.id);if(D){D.fireEvent("click",D);}},this);},cs3:function(B,C){var A=this.tree.getRootNode();delete A.attributes.children;A.reload(function(){var D=this.childNodes[0];D.expand(false,true,function(){D.fireEvent("click",D);});},A);},cs4:function(B,D){var A=this.tree.getRootNode(),C=this.tree.getSelectionModel().getSelectedNode().id;delete A.attributes.children;A.reload(function(){A.expand(false,true,function(){var E=this.childNodes[0];E.expand(false,true,function(){var F=E.findChild("id",C);if(F){F.fireEvent("click",F);}});},A);},this);},cs5:function(B,D){var A=this.tree.getRootNode(),C=D.dataId;delete A.attributes.children;A.reload(function(){A.expand(false,true,function(){var E=this.childNodes[0];E.expand(false,true,function(){var F=E.findChild("id",C);if(F){F.fireEvent("click",F);}});},A);},this);},refreshParentAnd:function(B,A){var D=this.tree.getSelectionModel().getSelectedNode();if(D&&D.parentNode){var C=D.parentNode;delete C.attributes.children;C.reload(B.createCallback(C,D),A);}},loadHistory:function(A,B){Ext.Ajax.request({url:"/ExternalItems/haiwaizhishigongxiang/SpaceTree.jcp",params:{path:B},method:"GET",scope:this,callback:function(L,J,H){var K=Ext.decode(H.responseText);var D=A.right.getComponent(0);if(D.getComponent(0)){D.getComponent(0).destroy();}if(K.success){var F=K.childs,G,E,C=false;for(var I=F.length-1;I>=0;I--){if(G=A.getNodeById(F[I])){E=G;if(B.split("::")[0]==F[I]){G.fireEvent("click",G);C=true;}else{if(!G.leaf){G.expand();}}}}if(!C&&E){E.fireEvent("click",E);}}else{if(K.message){}}}});},load:function(F,D,G,E){var C=new Ext.tree.AsyncTreeNode({id:"root",text:"空间导航",action:true,type:"space",icon:"/themes/icon/all/attach.gif"});var B=new Ext.tree.TreeLoader({dataUrl:"/ExternalItems/haiwaizhishigongxiang/SpaceTree.jcp"});var A=new Ext.tree.TreePanel({title:"空间导航",bodyStyle:"padding: 6 0 0 6",width:"500",height:"700",root:C,loader:B,rootVisible:false,autoScroll:true});A.on("afterrender",function(){this.loadHistory(A,"currentSpace");},this);A.right=F.ownerCt.ownerCt.getComponent(1);A.on("click",function(I){var J;var H=I.attributes;J={_UDS:H.UDS,action:H.action,levels:H.levels,dataId:H.id,exportData:H.id,exportItem:"SPACE_ID",exportTab:"f64c7776-a3d5-4011-87e9-f1a7178575b9",fromId:"148969",fromType:"2",objectId:"ce218c21-603c-447a-b652-d28dd337c24e",pageType:"view",programType:"ProgramInput"};this.right.loadProgram(J,false);});D.add(A);D.doLayout();this.tree=A;}};
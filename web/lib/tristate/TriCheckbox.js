Ext.namespace("lib.tristate");lib.tristate.TriCheckbox=Ext.extend(Ext.form.Checkbox,{valueList:[null,false,true],stateClassList:["x-checkbox-undef",null,"x-checkbox-checked"],overClass:"x-form-check-over",clickClass:"x-form-check-down",triState:true,defaultAutoCreate:{tag:"input",type:"hidden",autocomplete:"off"},initComponent:function(){this.value=this.checked;lib.tristate.TriCheckbox.superclass.initComponent.apply(this,arguments);this.vList=this.valueList.slice(0);this.cList=this.stateClassList.slice(0);if(this.triState!==true){this.vList.shift();this.cList.shift();}if(this.overCls!==undefined){this.overClass=this.overCls;delete this.overCls;}this.value=this.normalizeValue(this.value);},onRender:function(B,A){Ext.form.Checkbox.superclass.onRender.call(this,B,A);this.innerWrap=this.el.wrap({tag:"span",cls:"x-form-check-innerwrap"});this.wrap=this.innerWrap.wrap({cls:"x-form-check-wrap"});this.currCls=this.getCls(this.value);this.wrap.addClass(this.currCls);if(this.clickClass&&!this.disabled&&!this.readOnly){this.innerWrap.addClassOnClick(this.clickClass);}if(this.overClass&&!this.disabled&&!this.readOnly){this.innerWrap.addClassOnOver(this.overClass);}this.imageEl=this.innerWrap.createChild({tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-tscheckbox"},this.el);if(this.fieldClass){this.imageEl.addClass(this.fieldClass);}if(this.boxLabel){this.innerWrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel});}if(Ext.isIE){this.wrap.repaint();}this.resizeEl=this.positionEl=this.wrap;},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments);if(!this.boxLabel&&!this.fieldLabel&&this.imageEl){this.imageEl.alignTo(this.wrap,"c-c");}},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this);this.mon(this.innerWrap,{scope:this,click:this.onClick});},onClick:function(){if(!this.disabled&&!this.readOnly){this.setValue(this.vList[(this.vList.indexOf(this.value)+1)%this.vList.length]);}},getValue:function(){return this.value;},setValue:function(A){var B=this.value;this.value=this.normalizeValue(A);if(this.rendered){this.el.dom.value=this.value;}if(B!==this.value){this.updateView();this.fireEvent("check",this,this.value);if(this.handler){this.handler.call(this.scope||this,this,this.value);}}return this;},normalizeValue:function(A){return(A===null||A===undefined)&&this.triState?null:(A===true||(["true","yes","on","1"]).indexOf(String(A).toLowerCase())!=-1);},getCls:function(B){var A=this.vList.indexOf(this.value);return A>-1?this.cList[A]:undefined;},updateView:function(){var A=this.getCls(this.value);if(!this.wrap||A===undefined){return ;}this.wrap.replaceClass(this.currCls,A);this.currCls=A;}});Ext.reg("tricheckbox",lib.tristate.TriCheckbox);